<!DOCTYPE HTML>
<html>
<head>
    <title>Design Sample: Demon Crush - Robert Gervais Portfolio</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">

    <div id="wrapper">

        <header id="header">
            <a href="index.html" class="logo"><strong>Robert Gervais</strong> <span>Portfolio</span></a>
            <nav>
                <a href="#menu">Menu</a>
            </nav>
        </header>

        <nav id="menu">
            <ul class="links">
                <li><a href="index.html">Home</a></li>
                <li><a href="landing.html">Samples</a></li>
                <li><a href="design-samples-overview.html">Design Samples</a></li>
            </ul>
            <ul class="actions stacked">
                <li><a href="robert-gervais-resume.pdf" class="button primary fit" target="_blank">View Resume (PDF)</a></li>
            </ul>
        </nav>

        <div id="main" class="alt">

            <section id="one">
                <div class="inner">
                    <header class="major">
                        <h1>Demon Crush</h1>
                    </header>
                    <span class="image main"><img src="images/demon-crush-by-reverting-castles.jpg" alt="Image: Reverting Castles" /></span>

                    <h2>Project Overview</h2>
                    <p>This sample demonstrates my ability to write cutscenes that advance the plot in-game, apply narrative design to aesthetic elements in a 2D platformer fighting game, and implement custom narrative features for this game that we're building in Unreal Engine 5. The goal of "Demon Crush" is to implement a 2D platformer fighting game that looks like it could be played on a Super Nintendo Entertainment System, and my personal goal on the project is to implement a narrative design that players can feel in-game.</p>

                    <h2>Key Narrative Design Contributions</h2>
                    <ul>
                        <li><strong>Environmental Storytelling:</strong> Designing all of the levels to ensure that the world of Gochima comes to life during gameplay.</li>
                        <li><strong>Cutscene Design:</strong> Designing the cutscenes using animated Ukiyo-e panels to advance major plot points in-game.</li>
                        <li><strong>Intensity Response:</strong> Designed and implemented the intensity reponse system using fuzzy logic techniques to get the game respond to the intensity of what's happening in-game.</li>
                    </ul>

                    <h2>Code Snippet: Intensity System (Fuzzy Logic)</h2>
                    <p>This C++ snippet from the Unreal project shows the constructor for a 'Trapezoid' shape. This is a core component of the <strong>Intensity Response System</strong>, which uses fuzzy logic to define linguistic variables (like 'Low', 'Medium', 'High') for game states, allowing the system to react dynamically to gameplay intensity.</p>
<pre><code>Trapezoid::Trapezoid(FString valueName, double a, double b, double c, double d)
{
    A = a;
    B = b;
    C = c;
    D = d;
    //          B------C
    //         /        \
    //        /          \
    // (-e) +=  A          D += (+e)
    if (A == B)
        A += MathHelper::NegEpsilon;
    
    if (C == D)
        D += MathHelper::PosEpsilon;

    s_ValueName = valueName;
    d_LinguisticVal = -1;
}</code></pre>

                    <h3>Usage Example: Defining Fuzzy Rules</h3>
                    <p>The following function demonstrates how the `Trapezoid` class is used to define linguistic values (e.g., "Low_Enemy_Count") and then combine them into fuzzy rules. This example rule set determines a resulting "Intensity_Value" based on the "Enemy_Num" and "Combo_Pts" inputs.</p>
<pre><code>//basic fuzzy scenario test (enemy number, combo pts, intensity value)
void TrapFuzzyScenario::BuildIntensityScenarioRules_Example()
{
    FString Enemy_Num = TEXT("Enemy_Num");
    FString Combo_Pts = TEXT("Combo_Pts");
    FString Intensity_Value = TEXT("Intensity_Value");

    //first, build the scenario's ruleset
    //start with sample antecendents, (ai, bi)
    //ai = number of enemies
    TrapLinguisticVariable* EnemyNum = new TrapLinguisticVariable(false, Enemy_Num);
    check(EnemyNum != nullptr);
    //bi = combo point values
    TrapLinguisticVariable* ComboPts = new TrapLinguisticVariable(false, Combo_Pts);
    check(ComboPts != nullptr);
    //now, work on the consequence, ci
    //ci = intensity
    TrapLinguisticVariable* IntensityValue = new TrapLinguisticVariable(true, Intensity_Value);
    check(IntensityValue != nullptr);

    //define the antecedents
    //a1 = "low enemy count" is between 1.0 and 4.0 enemies
    EnemyNum->AddLinguisticValue(new Trapezoid(TEXT("Low_Enemy_Count"), 1.0, 1.5, 2.0, 4.0));
    //a2 = "medium enemy count" is between 2.0 and 6.0 enemies
    EnemyNum->AddLinguisticValue(new Trapezoid(TEXT("Medium_Enemy_Count"), 2.0, 4.0, 5.0, 6.0));
    //a3 = "high enemy count" is between 5.0 and 8.0 enemies
    EnemyNum->AddLinguisticValue(new Trapezoid(TEXT("High_Enemy_Count"), 5.0, 6.0, 7.0, 8.0));

    //b1 = "low combo points" is between 100.0 and 375.0 combo points
    ComboPts->AddLinguisticValue(new Trapezoid(TEXT("Low_Combo_Points"), 100.0, 150.0, 225.0, 375.0));
    //b2 = "medium combo points" is between 225.0 and 500.0 combo points
    ComboPts->AddLinguisticValue(new Trapezoid(TEXT("Medium_Combo_Points"), 225.0, 375.0, 400.0, 500.0));
    //b3 = "high combo points" is between 400.0 and 775.0 combo points
    ComboPts->AddLinguisticValue(new Trapezoid(TEXT("High_Combo_Points"), 400.0, 500.0, 625.0, 775.0));

    //define the consequence
    //c1 = "low intensity" is between 1.0 and 2.5
    IntensityValue->AddLinguisticValue(new Trapezoid(TEXT("Low_Intensity"), 1.0, 1.5, 1.75, 2.5));
    //c2 = "medium intensity" is between 1.75 and 4.0
    IntensityValue->AddLinguisticValue(new Trapezoid(TEXT("Medium_Intensity"), 1.75, 2.5, 3.0, 4.0));
    //c3 = "high intensity" is between 3.0 and 5.0
    IntensityValue->AddLinguisticValue(new Trapezoid(TEXT("High_Intensity"), 3.0, 4.0, 4.5, 5.0));

    //now, define the fuzzy rules, sigmai
    //s1 = if enemy count is low or combo count is low, then intensity value is low
    TrapFuzzyRuleHandle* Sigma1 = new TrapFuzzyRuleHandle();
    check(Sigma1 != nullptr);
    Sigma1->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::EMPTY, EnemyNum, TEXT("Low_Enemy_Count")));
    Sigma1->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::OR, ComboPts, TEXT("Low_Combo_Points")));
    Sigma1->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::EMPTY, IntensityValue, TEXT("Low_Intensity")));
    //s2 = if enemy count is medium or combo count is medium, then intensity value is medium
    TrapFuzzyRuleHandle* Sigma2 = new TrapFuzzyRuleHandle();
    check(Sigma2 != nullptr);
    Sigma2->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::EMPTY, EnemyNum, TEXT("Medium_Enemy_Count")));
    Sigma2->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::OR, ComboPts, TEXT("Medium_Combo_Points")));
    Sigma2->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::EMPTY, IntensityValue, TEXT("Medium_Intensity")));
    //s3 = if enemy count is high or combo count is high, then intensity value is high
    TrapFuzzyRuleHandle* Sigma3 = new TrapFuzzyRuleHandle();
    check(Sigma3 != nullptr);
    Sigma3->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::EMPTY, EnemyNum, TEXT("High_Enemy_Count")));
    Sigma3->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::OR, ComboPts, TEXT("High_Combo_Points")));
    Sigma3->AddTrapFuzzyTokenToRule(new TrapFuzzyRuleTokenizer(false, fuzzyOperation::EMPTY, IntensityValue, TEXT("High_Intensity")));

    trapezoidalDefuzzifier->AddFuzzyRule(Sigma1);
    trapezoidalDefuzzifier->AddFuzzyRule(Sigma2);
    trapezoidalDefuzzifier->AddFuzzyRule(Sigma3);

    AddLinguisticVariable(EnemyNum);
    AddLinguisticVariable(ComboPts);
    AddLinguisticVariable(IntensityValue);
}</code></pre>

                    <h2>Conclusion</h2>
                    <p>This sample highlights my proficiency with <strong>C++, Unreal Engine 5, and narrative systems</strong> to create a fun and immersive player experience in a 2D platformer fighting game. We've integrated my intensity system into the Demo to change the intensity of the music in-game, which I've written about in a series of narrative design blogs that I've collected in a downloadable PDF.  If you'd like to play Demon Crush, download it from our Steam page.</p>
                    <ul class="actions">
                        <li><a href="samples/demon-crush-blog-samples.pdf" class="button primary icon solid fa-download">Download Blogs (PDF)</a></li>
                        <li><a href="https://store.steampowered.com/app/2753400/Demon_Crush/" class="button primary icon brands fa-steam">Download on Steam</a></li>
                    </ul>
                    <ul class="actions">
                        <li><a href="design-samples-overview.html" class="button">Back to Design Samples</a></li>
                    </ul>
                </div>
            </section>

        </div>

        <footer id="footer">
            <div class="inner">
                <ul class="icons">
                    <li><a href="https://www.linkedin.com/in/robert-gervais-358928249/" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
                    <li><a href="https://x.com/RobertGDev" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
                </ul>
                <ul class="copyright">
                    <li>&copy; Robert Gervais</li>
                    <li>Design: <a href="https://html5.up.net">HTML5 UP</a></li>
                </ul>
            </div>
        </footer>

    </div>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

</body>
</html>